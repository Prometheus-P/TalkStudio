# TalkStudio 배포 가이드

## 1. 개요
본 문서는 TalkStudio 애플리케이션의 배포 프로세스, 환경 구성 및 배포 원칙에 대해 설명합니다. AI Software Factory v4.0의 CI/CD 파이프라인을 활용하여 안전하고 효율적인 배포를 목표로 합니다.

## 2. 배포 환경

TalkStudio는 다음 세 가지 주요 환경을 가집니다:

### 2.1. 개발 환경 (Development Environment)
- **목적**: 개발자가 로컬에서 코드 개발 및 테스트를 수행하는 환경.
- **특징**: 각 개발자의 워크스테이션에 설정되며, `README.md`의 "시작하기" 섹션을 참조하여 구성합니다.
- **배포 방식**: 로컬 개발 서버 실행.

### 2.2. 스테이징 환경 (Staging Environment)
- **목적**: 프로덕션 환경과 유사하게 구성된 테스트 환경. 최종 통합 테스트, QA 및 비즈니스 검증을 수행합니다.
- **특징**: `main` 브랜치에 코드가 푸시될 때 GitHub Actions (`deploy_staging.yml`)를 통해 자동으로 배포됩니다.
- **배포 방식**: 자동화된 CI/CD 파이프라인.
- **URL**: `staging.talkstudio.com` (예정)

### 2.3. 프로덕션 환경 (Production Environment)
- **목적**: 실제 사용자들이 접근하고 사용하는 실서비스 환경.
- **특징**: 엄격한 품질 검증을 통과한 코드가 배포되며, `v*.*.*` 형태의 태그가 `main` 브랜치에 푸시되거나 수동 트리거 (`workflow_dispatch`)를 통해 GitHub Actions (`deploy_production.yml`)로 배포됩니다.
- **배포 방식**: 자동화된 CI/CD 파이프라인 (태그 기반 또는 수동 트리거).
- **URL**: `talkstudio.com` (예정)

## 3. 배포 원칙

- **자동화**: 모든 배포는 가능한 한 자동화된 스크립트와 CI/CD 파이프라인을 통해 이루어집니다.
- **멱등성**: 배포 스크립트는 여러 번 실행해도 동일한 결과를 보장해야 합니다.
- **가시성**: 배포 과정은 로그를 통해 투명하게 추적 가능해야 합니다.
- **롤백 가능성**: 문제 발생 시 이전 안정 버전으로의 신속한 롤백 전략을 항상 준비합니다.
- **제로 다운타임 (목표)**: 사용자 서비스 중단 없이 배포를 완료하는 것을 목표로 합니다 (블루/그린 배포, 카나리 배포 등).

## 4. 배포 프로세스 (GitHub Actions 기반)

### 4.1. CI (Continuous Integration)
1.  **코드 변경**: 개발자가 코드 변경 후 `main` 브랜치에 푸시 또는 Pull Request 생성.
2.  **테스트**: `ci.yml` 워크플로우가 실행되어 코드 빌드, 린트, 유닛/통합 테스트를 수행.
3.  **정적 분석/보안 스캔**: 코드 품질 및 잠재적 보안 취약점 검사.
4.  **성공 시**: 다음 단계로 진행. 실패 시 개발자에게 알림.

### 4.2. CD (Continuous Deployment / Delivery)

#### 스테이징 환경 배포
1.  **조건**: `main` 브랜치에 성공적으로 병합된 후 (CI 통과).
2.  **워크플로우**: `deploy_staging.yml` 실행.
3.  **단계**:
    - 리포지토리 체크아웃.
    - 프론트엔드 및 백엔드 의존성 설치 및 빌드.
    - 스테이징 서버에 애플리케이션 배포 (예: AWS S3, EC2, Kubernetes).
    - 배포 후 자동화된 검증 테스트 (Smoke Test, Health Check).

#### 프로덕션 환경 배포
1.  **조건**:
    - `main` 브랜치에 `v*.*.*` 형태의 태그 푸시.
    - 또는 GitHub Actions `workflow_dispatch`를 통한 수동 트리거.
    - 스테이징 환경에서의 충분한 검증 완료.
2.  **워크플로우**: `deploy_production.yml` 실행.
3.  **단계**:
    - 리포지토리 체크아웃.
    - 프론트엔드 및 백엔드 의존성 설치 및 빌드.
    - 프로덕션 서버에 애플리케이션 배포 (블루/그린 또는 카나리 전략 권장).
    - 배포 후 철저한 검증 테스트 및 Health Check.
    - 문제 발생 시 자동 또는 수동 롤백 절차 수행.

## 5. 배포 도구 (예정)
- **CI/CD 플랫폼**: GitHub Actions
- **컨테이너화**: Docker (선택 사항)
- **오케스트레이션**: Kubernetes (선택 사항)
- **클라우드 프로바이더**: AWS, GCP, Azure (예정)
- **배포 스크립트**: Bash 스크립트, Ansible, Terraform (IaC)
